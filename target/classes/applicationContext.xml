<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mongo="http://www.springframework.org/schema/data/mongo"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/mongo https://www.springframework.org/schema/data/mongo/spring-mongo.xsd">
    <context:annotation-config/>
    <!--Bundle-->
    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="useCodeAsDefaultMessage" value="false"/>
        <property name="basename" value="property.message"/>
        <property name="defaultEncoding" value="UTF-8"/>
        <property name="cacheSeconds" value="-1"/>
    </bean>

    <bean name="messageBundle" class="org.example.web.MessageBundle">
        <constructor-arg name="messageSource" ref="messageSource"/>
    </bean>
    <!--    mongo-->
    <mongo:mongo-client id="replicaSetMongo"
                        connection-string="mongodb+srv://root:root@cluster0.0hpdq.mongodb.net/MongoTest?retryWrites=true&amp;w=majority"/>
    <mongo:db-factory dbname="mongoTasks" mongo-client-ref="replicaSetMongo" id="mongoDbFactory"/>
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    </bean>
    <!--    <bean class=-->
    <!--                  "org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>-->
    <bean name="viewReader" class="org.example.web.view.Reader">
        <constructor-arg name="validator" ref="validator"/>
        <constructor-arg ref="messageBundle" name="bundle"/>
    </bean>
    <bean id="menuView" class="org.example.web.view.ViewPresenter">
        <constructor-arg ref="messageBundle" name="bundle"/>
        <property ref="menuView" name="viewPresenter"/>
        <constructor-arg ref="controllerImpl"/>
        <constructor-arg ref="viewReader"/>
    </bean>
    <bean name="validator" class="org.example.web.view.Validator"/>
    <bean name="controllerImpl" class="org.example.web.controller.ControllerImpl">
        <constructor-arg name="taskDaoImpl" ref="taskDaoImpl"/>
    </bean>

    <bean id="taskDaoImpl" class="org.example.web.dao.impl.TaskDaoImpl">
        <constructor-arg ref="mongoTemplate"/>
    </bean>
</beans>